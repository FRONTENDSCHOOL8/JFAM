import"./reset-9GtOEJoH.js";/* empty css              */import{p as A}from"./pocketbase-v9INCz3k.js";document.addEventListener("DOMContentLoaded",async()=>{const L=document.querySelectorAll(".form-input"),h=document.querySelectorAll(".form-check"),N=document.querySelectorAll(".span-condition"),_=document.querySelectorAll(".button-show"),m=document.querySelectorAll(".button-erase"),q=document.querySelector(".signup-form"),k=document.querySelector(".button-signup-submit"),[$,p,l,M]=L,[z,V,Z,F,B,D,H,w,v]=h,[r,o,d,i]=N,[b,E,P,I]=m,g={regexId:/^[a-zA-Z0-9]{6,12}$/,regexPassword:/^(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{6,16}$/,regexEmail:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$/},c={id:!1,password:!1,passwordCheck:!1,email:!1},O=async e=>{try{return await A.collection("users").getFirstListItem(`username="${e}"`),!0}catch{return!1}},n=(e,t)=>{const s=e;s.textContent=t},a=(e,t,s)=>{const u=e;if(t==="add")u.classList.add(s);else if(t==="remove")u.classList.remove(s);else throw new Error("setClassList 함수의 modify는 add 또는 remove 입니다")},T=e=>{switch(a(b,"add","has-input"),e){case"emptyId":n(r,"입력한 내용이 없어요."),a(r,"add","warning"),a(b,"remove","has-input");break;case"invalidId":n(r,"영문 또는 영문, 숫자 조합 6~12자리로 입력해주세요."),a(r,"add","warning");break;case"duplicationId":n(r,"이미 사용 중인 아이디입니다."),a(r,"add","warning");break;default:n(r,"");break}},j=e=>{switch(a(E,"add","has-input"),e){case"emptyPassword":n(o,"입력한 내용이 없어요."),a(o,"add","warning"),a(E,"remove","has-input");break;case"invalidPassword":n(o,"특수문자(~!@#$%^&*) 포함 6~16자리로 입력해주세요."),a(o,"add","warning");break;default:n(o,"");break}},y=e=>{switch(a(P,"add","has-input"),e){case"emptyPasswordCheck":n(d,"입력한 내용이 없어요."),a(d,"add","warning"),a(P,"remove","has-input");break;case"notMatchedPassword":n(d,"일치하지 않습니다. 다시 입력해주세요."),a(d,"add","warning");break;default:n(d,"");break}},G=e=>{switch(a(I,"add","has-input"),e){case"emptyEmail":n(i,"입력한 내용이 없어요."),a(i,"add","warning"),a(I,"remove","has-input");break;case"invalidEmail":n(i,"이메일 형식이 맞지 않습니다. 다시 입력해 주세요."),a(i,"add","warning");break;default:n(i,"");break}},J=e=>{const t=e.target.parentNode.children[1],s=e.target;t.type==="text"?(t.type="password",a(s,"remove","is-checked")):(t.type="text",a(s,"add","is-checked"))},K=e=>{const t=e.target.parentNode.children,s=t[1],u=t[2],X=t[t.length-1];s.value="",a(u,"remove","has-input"),n(X,"입력한 내용이 없어요.")},Q=e=>{e.target.checked===!0?h.forEach(t=>{const s=t;s.checked=!0}):h.forEach(t=>{const s=t;s.checked=!1})},R=e=>{e.target.checked===!0?(w.checked=!0,v.checked=!0):(w.checked=!1,v.checked=!1)},U=async e=>{const t=e;return t.trim()===""?"emptyId":g.regexId.test(t)?await O(t)?"duplicationId":"validId":"invalidId"},C=e=>{const t=e;return t.trim()===""?"emptyPassword":g.regexPassword.test(t)?"validPassword":"invalidPassword"},f=()=>{const e=l.value;return e.trim()===""?"emptyPasswordCheck":e!==p.value?"notMatchedPassword":"validPasswordCheck"},x=e=>{const t=e;return t.trim()===""?"emptyEmail":g.regexEmail.test(t)?"validEmail":"invalidEmail"},S=async e=>{const t=e.target;switch(t.id){case"input-id":await U(t.value).then(s=>{T(s),c.id=s==="validId"});break;case"input-password":j(C(t.value)),y(f(l.value)),c.password=C(t.value)==="validPassword";break;case"input-password-check":y(f(t.value)),c.passwordCheck=f(t.value)==="validPasswordCheck";break;case"input-email":G(x(t.value)),c.email=x(t.value)==="validEmail";break}c.id===!0&&c.password===!0&&p.value===l.value&&c.email===!0&&V.checked===!0&&Z.checked===!0&&F.checked===!0&&B.checked===!0?k.disabled=!1:k.disabled=!0},W=()=>{const e={username:$.value,email:M.value,password:p.value,passwordConfirm:l.value,required_agree:!0,provision_of_personal_information:D.checked,receive_marketing_SNS:w.checked,receive_marketing_email:v.checked};try{A.collection("users").create(e).then(()=>{alert("축하합니다! 회원가입 완료되었습니다."),window.location.href="/src/pages/login/"}).catch(()=>{console.log(e),alert("입력 상태을 확인해주세요.")})}catch(t){alert(t)}};_.forEach(e=>{e.addEventListener("click",J)}),m.forEach(e=>{e.addEventListener("click",K)}),z.addEventListener("click",Q),H.addEventListener("click",R),q.addEventListener("input",S),m.forEach(e=>{e.addEventListener("click",S)}),k.addEventListener("click",W)});
